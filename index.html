<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>THEGRID</title>
  <link rel="preload" as="image" href="assets/images/gc_logo.png">
  <link rel="stylesheet" href="assets/css/styles.css">
  <style>
    :root{
      --bg:#0b0f10; --panel:#0f1416; --ring:#22282b; --text:#eaeff2; --muted:#9aa6ac;
      --gold:#E9C46A; --gold-2:#CDA349; --gloss:rgba(233,196,106,.18);
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 600px at 30% -10%,rgba(233,196,106,.06),transparent 60%),#0b0f10;color:var(--text);font:500 16px/1.45 system-ui,-apple-system,Segoe UI,Inter,Roboto}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:20px}
    header{display:flex;justify-content:space-between;align-items:center;padding:6px 0}
    .brand{display:flex;gap:10px;align-items:center}
    .brand .dot{width:10px;height:10px;border-radius:50%;background:var(--gold);box-shadow:0 0 24px var(--gold)}
    .brand h1{font-weight:800;letter-spacing:.6px;margin:0}
    .cta{padding:10px 16px;border:1.5px solid var(--gold-2);border-radius:999px}
    .cta:hover{box-shadow:0 0 20px rgba(233,196,106,.25)}
    .hero{position:relative;margin:24px 0 10px;border-radius:24px;padding:18px;background:linear-gradient(180deg,rgba(233,196,106,.09),rgba(233,196,106,.02));border:1px solid rgba(233,196,106,.25);box-shadow:inset 0 1px 0 rgba(255,255,255,.08),0 20px 60px rgba(0,0,0,.35)}
    .hero-grid{display:grid;grid-template-columns:1fr;gap:18px}
    .hero .tile{border-radius:18px;background:#0b0f10;border:1px solid var(--ring);min-height:280px;display:grid;place-items:center;position:relative;overflow:hidden}
    .logo-ring{width:200px;height:200px;border-radius:50%;display:grid;place-items:center;background:radial-gradient(80px 80px at 50% 55%,rgba(233,196,106,.12),transparent 70%),#0b0f10;border:1px solid rgba(233,196,106,.25);box-shadow:0 0 80px var(--gloss) inset}
    .logo-ring img{width:120px;height:120px;object-fit:contain;filter:drop-shadow(0 4px 14px rgba(233,196,106,.45))}
    .spin{animation:spin 10s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .video, .slide{width:100%;height:100%;object-fit:cover}
    .title{font-size:38px;font-weight:900;text-align:center;margin:8px 0;color:var(--gold)}
    .lead{color:var(--muted);text-align:center;margin:0 auto 18px;max-width:780px}
    .pill-row{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin:8px 0 24px}
    .pill{padding:12px 18px;border-radius:999px;border:1.5px solid var(--ring);background:#0f1416}
    .pill.primary{background:linear-gradient(180deg,var(--gold),var(--gold-2));color:#111;font-weight:800;border:none;box-shadow:0 12px 30px rgba(233,196,106,.25)}
    section{margin:30px 0}
    h2{margin:0 0 12px}
    .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));border:1px solid var(--ring);border-radius:16px;overflow:hidden}
    .card img{width:100%;height:220px;object-fit:cover;display:block}
    .card .cap{padding:12px 14px;color:var(--muted)}
    .reels{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}
    video{background:black}
    .menu{position:fixed;right:16px;top:12px;z-index:10}
    .greet{position:fixed;left:16px;top:12px;z-index:10;background:#0f1416;border:1px solid var(--ring);padding:8px 12px;border-radius:10px;color:var(--muted)}
    #celebrate{position:fixed;inset:0;pointer-events:none}
    @media(min-width:900px){ .hero-grid{grid-template-columns:380px 1fr} .hero .tile{min-height:360px} .title{font-size:44px}}
  </style>
</head>
<body>
  <canvas id="celebrate"></canvas>

  <div class="wrap">
    <header>
      <div class="greet" id="greet">Welcome.</div>
      <div class="brand">
        <span class="dot"></span>
        <h1 id="brandName">THEGRID</h1>
      </div>
      <a href="#" class="cta" onclick="demoCelebrate('pro')">Join Now</a>
    </header>

    <div class="hero">
      <div class="hero-grid">
        <div class="tile" id="logoTile">
          <div class="logo-ring"><img id="gcLogo" alt="GC Logo"></div>
        </div>
        <div class="tile" id="heroTile"></div>
      </div>
    </div>

    <h2 class="title" id="headline">Black & Gold Performance Creativity</h2>
    <p class="lead">Signature niches, cinematic reels, and a savable system that learns from your inputs. Plug your save, sync with the site, and level up.</p>
    <div class="pill-row">
      <a class="pill primary" href="#niches">Explore Niches</a>
      <a class="pill" href="#reels">Cinematic Reels</a>
      <a class="pill" href="#" onclick="demoCelebrate('savable')">Monetise</a>
    </div>

    <section id="niches">
      <h2>Signature Niches</h2>
      <div class="cards" id="nicheCards"></div>
    </section>

    <section id="reels">
      <h2>Cinematic Landscape Reels</h2>
      <div class="reels" id="reelGrid"></div>
    </section>

    <section id="updates">
      <h2>Live Updates & Roadmap</h2>
      <div id="roadmapNote" class="lead" style="text-align:left">No updates yet. Create <code>Data/updates.json</code> to populate this board.</div>
    </section>

    <section>
      <h2>Start in 20 Seconds</h2>
      <ol>
        <li>Pick a niche</li>
        <li>Paste the prompt</li>
        <li>Render â€” then save your result</li>
      </ol>
    </section>
  </div>

  <script>
    const $ = s => document.querySelector(s);
    async function loadJSON(p){ try{const r=await fetch(p,{cache:"no-store"}); if(!r.ok) throw 0; return await r.json();}catch(e){return null;} }

    function setGreeting(cfg){
      if(!cfg?.ui?.greetings?.enabled) return;
      const h=new Date().getHours();
      const m = h<12?cfg.ui.greetings.messages.morning
              : h<17?cfg.ui.greetings.messages.afternoon
              : h<22?cfg.ui.greetings.messages.evening
              : cfg.ui.greetings.messages.night;
      $("#greet").textContent=m;
    }
    function setBrand(cfg){
      $("#brandName").textContent = cfg?.ui?.brand?.name || "THEGRID";
      if(cfg?.ui?.brand?.goldGlow) document.documentElement.style.setProperty("--gloss","rgba(233,196,106,.28)");
    }
    function mountLogo(cfg){
      const src = cfg?.hero?.logo, img=$("#gcLogo");
      if(!src){ $("#logoTile").style.display="none"; return; }
      img.src = src; if(cfg?.hero?.logoSpin) img.classList.add("spin");
    }
    function mountHero(cfg){
      const tile=$("#heroTile"); tile.innerHTML="";
      const hero=cfg?.hero||{};
      if(hero.mode==="video" && hero.video){
        const v=document.createElement("video");
        v.className="video"; v.src=hero.video; v.muted=true; v.playsInline=true; v.autoplay=true; v.loop=true;
        tile.appendChild(v);
      }else{
        const s=hero.slides||[]; if(!s.length){ tile.innerHTML='<div class="lead">Add hero slides in Data/thegrid-access-control.json</div>'; return;}
        const img=document.createElement("img"); img.className="slide"; tile.appendChild(img);
        let i=0; img.src=s[0]; img.style.transition="opacity .6s"; 
        setInterval(()=>{ i=(i+1)%s.length; img.style.opacity=0; setTimeout(()=>{ img.src=s[i]; img.style.opacity=1; },200); },3500);
      }
    }
    function mountNiches(cfg){
      const box=$("#nicheCards"); box.innerHTML="";
      (cfg?.featured?.niches||[]).forEach(n=>{
        const el=document.createElement("div");
        el.className="card";
        el.innerHTML=`<img loading="lazy" src="${n.image}" alt=""><div class="cap">${n.title}</div>`;
        box.appendChild(el);
      });
    }
    function mountReels(cfg){
      const box=$("#reelGrid"); box.innerHTML="";
      (cfg?.featured?.landscapeReels||[]).forEach(src=>{
        const v=document.createElement("video");
        v.src=src; v.controls=true; v.preload="metadata"; v.style.borderRadius="14px"; v.style.border="1px solid var(--ring)";
        box.appendChild(v);
      });
    }
    async function mountRoadmap(){
      const data=await loadJSON("Data/updates.json");
      if(!data || !Array.isArray(data.now)) return;
      $("#roadmapNote").style.display="none";
      const wrap=document.createElement("div");
      function group(title,arr){
        const sec=document.createElement("div"); sec.style.margin="14px 0 18px";
        sec.innerHTML=`<h3 style="margin:0 0 6px">${title}</h3>`;
        const ul=document.createElement("ul"); (arr||[]).forEach(x=>{ const li=document.createElement("li"); li.textContent=x.title||x; ul.appendChild(li);});
        sec.appendChild(ul); wrap.appendChild(sec);
      }
      group("Now Shipping",data.now); group("In Progress",data.progress); group("Planned",data.planned);
      $("#updates").appendChild(wrap);
    }
    function celebrate(style="gold-confetti", duration=1500){
      const cvs=document.getElementById("celebrate"),ctx=cvs.getContext("2d");
      const dpr=window.devicePixelRatio||1; cvs.width=innerWidth*dpr; cvs.height=innerHeight*dpr; ctx.scale(dpr,dpr);
      const N=style.includes("small")?60:120;
      const parts=Array.from({length:N},()=>({x:Math.random()*innerWidth,y:-20-Math.random()*60,vx:(Math.random()-.5)*2,vy:2+Math.random()*3,r:2+Math.random()*3,a:1}));
      let t0=null; function frame(t){ if(!t0)t0=t; const dt=t-t0; ctx.clearRect(0,0,innerWidth,innerHeight);
        parts.forEach(p=>{p.x+=p.vx;p.y+=p.vy;p.vy+=0.02;p.a-=0.006;ctx.globalAlpha=Math.max(p.a,0);const g=ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r*3);g.addColorStop(0,"#fff2");g.addColorStop(1,"#E9C46A");ctx.fillStyle=g;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,6.283);ctx.fill();});
        if(dt<duration) requestAnimationFrame(frame); else ctx.clearRect(0,0,cvs.width,cvs.height);
      } requestAnimationFrame(frame);
    }
    function demoCelebrate(tier){
      const t=window._cfg?.ui?.celebrations?.tiers?.[tier];
      if(window._cfg?.ui?.celebrations?.enabled && t){ celebrate(t.style,t.duration); } else { celebrate(); }
    }
    (async function init(){
      const cfg=await loadJSON("Data/thegrid-access-control.json"); window._cfg=cfg||{};
      if(!cfg){ console.warn("Missing Data/thegrid-access-control.json"); return; }
      setBrand(cfg); setGreeting(cfg); mountLogo(cfg); mountHero(cfg); mountNiches(cfg); mountReels(cfg); mountRoadmap();
    })();
  </script>
</body>
</html>
