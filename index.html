<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>THE GRID</title>
  <meta name="color-scheme" content="dark light">
  <style>
    :root{--bg:#0d0f12;--card:#12151a;--muted:#9aa6b2;--text:#e8edf2;--accent:#59e1ff;--pill:#0f1217;--stroke:#1b1f26}
    *{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
    .wrap{max-width:920px;margin:auto;padding:24px}
    h1{margin:0 0 8px;font-size:32px} h2{margin:0 0 8px;font-size:20px}
    p{margin:0 0 10px;color:var(--muted)}
    .grid{display:grid;gap:12px}
    .card{background:var(--card);border-radius:16px;padding:20px;box-shadow:0 0 0 1px var(--stroke)}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{display:inline-block;padding:12px 16px;border-radius:12px;background:var(--accent);color:#001018;font-weight:600;border:0}
    .btn.ghost{background:var(--pill);color:var(--text);border:1px solid var(--stroke)}
    .pill{padding:6px 10px;border-radius:999px;background:var(--pill);border:1px solid var(--stroke);color:var(--muted);font-size:13px}
    ul{margin:10px 0 0 18px}
    a{color:var(--accent);text-decoration:none}a:hover{text-decoration:underline}
    .price{font-size:28px;font-weight:700;margin:6px 0}
    .plan{display:grid;gap:10px}
    .footer{margin:18px 0 0;color:var(--muted);font-size:14px}
  </style>
</head>
<body>
  <div class="wrap grid">
    <header class="card">
      <h1 id="title">THE GRID</h1>
      <p id="tag">Elite results. Zero friction. Mobile‑first. Always learning.</p>
      <div class="row" style="margin-top:8px">
        <a class="btn" id="ctaAccess" href="#buy">Get Access</a>
        <a class="btn ghost" href="#pricing">See Pricing</a>
      </div>
      <div class="row" id="badges" style="margin-top:8px">
        <span class="pill">Ultra‑light</span>
        <span class="pill">Self‑updating</span>
        <span class="pill">UK‑ready</span>
      </div>
    </header>

    <section class="card">
      <h2>Self‑updating</h2>
      <p>Content pulls from tiny JSON files. No rebuilds, no bloat.</p>
    </section>

    <section class="card">
      <h2>Learning engine</h2>
      <p>With consent, we ingest small signals and keep only what improves results.</p>
    </section>

    <section class="card" id="updates">
      <h2>Live Updates</h2>
      <div id="updatesList"></div>
    </section>

    <section class="card" id="feedback">
      <h2>Help the system learn (optional)</h2>
      <label style="display:flex;align-items:center;gap:10px;margin:8px 0">
        <input id="consent" type="checkbox"> <span>I consent to processing my submission.</span>
      </label>
      <textarea id="note" rows="3" placeholder="Short note (what you liked/disliked)" style="width:100%;border-radius:12px;border:1px solid var(--stroke);background:var(--pill);color:var(--text);padding:10px"></textarea>
      <input id="link" placeholder="Paste a link (optional)" style="width:100%;margin-top:8px;border-radius:12px;border:1px solid var(--stroke);background:var(--pill);color:var(--text);padding:10px">
      <button class="btn" style="margin-top:10px" onclick="sendFeedback()">Send</button>
      <p class="footer">By sending, you confirm you have permission to share this content. See <a href="./privacy.html">Privacy</a>.</p>
    </section>

    <section class="card" id="pricing">
      <h2>Pricing</h2>
      <div id="plans" class="grid"></div>
      <p class="footer">Prices include applicable VAT when charged by the processor.</p>
    </section>

    <section class="card" id="buy">
      <h2>Pay securely your way</h2>
      <div class="grid">
        <a id="stripe" class="btn" href="#" target="_blank" rel="noopener">Stripe (Cards &amp; Wallets)</a>
        <a id="paypal" class="btn ghost" href="#" target="_blank" rel="noopener">PayPal</a>
        <a id="revolut" class="btn ghost" href="#" target="_blank" rel="noopener">Revolut (backup)</a>
      </div>
      <p class="footer">Hosted checkouts handle SCA and PCI. We never store card data. • UK‑based • GDPR‑aware • Export &amp; delete on request. <a href="./terms.html">Terms</a> · <a href="./privacy.html">Privacy</a></p>
    </section>
  </div>

  <script>
    (async function init(){
      try{
        const cfg = await (await fetch('./config.json',{cache:'no-store'})).json();
        const upd = await (await fetch('./updates.json',{cache:'no-store'})).json();

        // Header
        document.getElementById('title').textContent = cfg.site.name || 'THE GRID';
        document.getElementById('tag').textContent = cfg.site.tagline || '';

        // Badges
        const badges = document.getElementById('badges'); badges.innerHTML = '';
        (cfg.badges || []).forEach(b => {
          const s = document.createElement('span'); s.className='pill'; s.textContent=b; badges.appendChild(s);
        });

        // Updates
        const ul = document.getElementById('updatesList'); ul.innerHTML = '';
        (upd.items || []).forEach(x=>{
          const box = document.createElement('div');
          box.className = 'card';
          box.style.margin='8px 0'; box.style.padding='12px';
          box.innerHTML = '<strong>'+x.title+'</strong><br>'+x.body+
            '<div class="footer" style="margin-top:6px">'+(x.author||'')+' • '+(x.published_at||'')+'</div>';
          ul.appendChild(box);
        });

        // Plans
        const plans = document.getElementById('plans'); plans.innerHTML='';
        (cfg.plans || []).forEach(p=>{
          const d = document.createElement('div'); d.className='plan card';
          d.innerHTML = '<strong>'+p.name+'</strong>' +
                        '<div class="price">£'+p.price_gbp+' / month</div>' +
                        '<ul>'+ (p.features||[]).map(f=>'<li>'+f+'</li>').join('') + '</ul>' +
                        '<a class="btn" href="#buy">Buy</a>';
          plans.appendChild(d);
        });

        // Payment links
        if(cfg.payments){
          if(cfg.payments.stripe_link){ document.getElementById('stripe').href = cfg.payments.stripe_link; }
          if(cfg.payments.paypal_link){ document.getElementById('paypal').href = cfg.payments.paypal_link; }
          if(cfg.payments.revolut_link){ document.getElementById('revolut').href = cfg.payments.revolut_link; }
        }
      }catch(e){
        console.error(e);
        document.getElementById('updatesList').innerHTML =
          '<div class="card" style="margin-top:8px">Could not load live content. Check JSON validity.</div>';
      }
    })();

    function sendFeedback(){
      const consent = document.getElementById('consent').checked;
      if(!consent){ alert('Please tick consent to send.'); return; }
      document.getElementById('note').value='';
      document.getElementById('link').value='';
      alert('Thanks! Your feedback was noted locally for now.');
    }
  </script>
</body>
</html>
